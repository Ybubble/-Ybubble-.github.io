

<!DOCTYPE html>
<html lang="zn-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/1.jpg">
  <link rel="icon" href="/img/1.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="3.7 TCP Congestion Controlï¼ŒTCPæ‹¥å¡æ§åˆ¶   the approach taken by TCP is to have each sender limit the rate at which it sends traffic into its connection as a function of perceived(æ„ŸçŸ¥åˆ°çš„ï¼Œè®¤ä¸º) network congestio">
<meta property="og:type" content="article">
<meta property="og:title" content="ç¬¬ä¸‰ç« -è¿è¾“å±‚ï¼ˆä¸ƒï¼‰">
<meta property="og:url" content="https://ybubble.github.io/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/index.html">
<meta property="og:site_name" content="Bubble&#39;s Blog">
<meta property="og:description" content="3.7 TCP Congestion Controlï¼ŒTCPæ‹¥å¡æ§åˆ¶   the approach taken by TCP is to have each sender limit the rate at which it sends traffic into its connection as a function of perceived(æ„ŸçŸ¥åˆ°çš„ï¼Œè®¤ä¸º) network congestio">
<meta property="og:locale" content="zn_CN">
<meta property="og:image" content="https://ybubble.github.io/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/1.jpg">
<meta property="og:image" content="https://ybubble.github.io/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/2.jpg">
<meta property="og:image" content="https://ybubble.github.io/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/4.jpg">
<meta property="og:image" content="https://ybubble.github.io/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/5.jpg">
<meta property="og:image" content="https://ybubble.github.io/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/6.jpg">
<meta property="og:image" content="https://ybubble.github.io/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/net1.jpg">
<meta property="og:image" content="https://ybubble.github.io/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/net2.jpg">
<meta property="article:published_time" content="2024-02-20T04:40:44.586Z">
<meta property="article:modified_time" content="2024-02-20T07:36:18.419Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://ybubble.github.io/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/1.jpg">
  
  
  
  <title>ç¬¬ä¸‰ç« -è¿è¾“å±‚ï¼ˆä¸ƒï¼‰ - Bubble&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.2/katex.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"ybubble.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.1.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Bubble</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Category</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/3.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="ç¬¬ä¸‰ç« -è¿è¾“å±‚ï¼ˆä¸ƒï¼‰"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-02-20 12:40" pubdate>
          February 20, 2024 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    

    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">ç¬¬ä¸‰ç« -è¿è¾“å±‚ï¼ˆä¸ƒï¼‰</h1>
            
            
              <div class="markdown-body">
                
                <h1>3.7 TCP Congestion Controlï¼ŒTCPæ‹¥å¡æ§åˆ¶</h1>
<ul>
<li>
<p>the approach taken by TCP is to have each sender limit the rate at which it sends traffic into its connection as a function of perceived(æ„ŸçŸ¥åˆ°çš„ï¼Œè®¤ä¸º) network congestionï¼Œè®©æ¯ä¸€ä¸ªå‘é€æ–¹æ ¹æ®æ‰€æ„ŸçŸ¥åˆ°çš„ç½‘ç»œæ‹¥å¡ç¨‹åº¦æ¥é™åˆ¶å…¶èƒ½å‘è¿æ¥å‘é€æµé‡çš„é€Ÿç‡</p>
<ul>
<li>increases its send rate, perceives little congestion</li>
<li>reduces its send rate, perceives congestion</li>
</ul>
</li>
<li>
<p>each side of a TCP connection consists of a receive buffer, a send buffer, and several variables (LastByteRead, rwnd, and so on)</p>
</li>
<li>
<p>The TCP congestion-control mechanism operating at the <strong>sender</strong> keeps track of an <u>additional variable</u>, the <strong>congestion window</strong>(æ‹¥å¡çª—å£)ï¼Œdenoted <strong>cwnd</strong></p>
<ul>
<li>
<p>imposes a constraint(é™åˆ¶) on the <u>rate</u> at which a TCP <u>sender</u> can send traffic(æµé‡ï¼Œæ•°æ®é‡) into the network</p>
</li>
<li>
<p>the amount of <strong>unacknowledged data</strong> at a sender may not exceed <u>the minimum of cwnd and rwnd</u>, that is: <strong>LastByteSent - LastByteAcked â‰¤ min{cwnd,rwnd}</strong></p>
<img src="/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/1.jpg" srcset="/img/loading.gif" lazyload class="">
</li>
<li>
<p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>â‰ˆ</mo><mfrac><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow></mfrac><mi>b</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>s</mi><mi mathvariant="normal">/</mi><mi>s</mi><mi>e</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">rate â‰ˆ\frac{cwnd}{RTT} bytes/sec
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">RTT</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord mathnormal">t</span><span class="mord mathnormal">es</span><span class="mord">/</span><span class="mord mathnormal">sec</span></span></span></span></span></p>
</li>
</ul>
</li>
</ul>
<p><code> assume that the TCP receive buffer is so large that the receive-window constraint can be ignored, thus, the amount of unacknowledged data at the sender is solely limited by cwnd. We will also assume that the sender always has data to send, ie., that all segments in the congestion window are sent. consider a connection for which loss and packet transmission delays are negligible</code></p>
<p><code>=&gt; limits the amount of unacknowledged data at the sender</code></p>
<p><code>=&gt;indirectly limits the sender's send rate=&gt; the sender's send rate is roughly:cwnd/RTT bytes/sec</code></p>
<p><code>=&gt;By adjusting the value of cwnd, the sender can therefore adjust the rate at which it sends data into its connection</code></p>
<ul>
<li>define a**â€œloss eventâ€**at a TCP <u>sender</u> as the occurrence of either a <strong>timeout</strong> or the receipt of <strong>three duplicate ACKs</strong> from the receiver</li>
<li>when there is excessive congestion, then one (or more)router buffers along the path overflows, causing a datagram to be dropped</li>
<li>Because TCP uses <strong>acknowledgements</strong> to trigger(å¼•å‘ï¼Œè§¦å‘) (or <u>clock</u>ï¼Œè®¡æ—¶) its increase in <strong>congestion window size</strong>, TCP is said to be <strong>self-clocking</strong>(è‡ªè®¡æ—¶)</li>
<li>TCP uses the following guiding principles:
<ul>
<li>A lost segment implies congestion, and hence, the TCP senderâ€™s rate should be decreased when a segment is lost
<ul>
<li>a timeout event or the receipt of <strong>four acknowledgments</strong> for a given segment (one <u>original ACK</u> and then <u>three duplicate ACKs</u>)</li>
<li>An acknowledged segment indicates that the network is delivering the senderâ€™s segments to the receiver, and hence, the senderâ€™s rate can be increased when an ACK arrives for a previously unacknowledged segment</li>
<li>Bandwidth probingï¼Œå®½å¸¦æ¢æµ‹
<ul>
<li>Note that there is <u>no explicit signaling</u> of congestion state by the networkâ€”ACKs and loss events serve as implicit signalsâ€”and that each TCP sender acts on local information <u>asynchronously</u>(å¼‚æ­¥äº) from other TCP senders</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>TCP congestion-control algorithm</strong>(TCP æ‹¥å¡æ§åˆ¶ç®—æ³•)
<ul>
<li><strong>slow start</strong>(æ…¢å¯åŠ¨) + <strong>congestion avoidance</strong>(æ‹¥å¡é¿å…) + <strong>fast recovery</strong>(å¿«é€Ÿæ¢å¤)</li>
<li><u>Slow start and congestion avoidance</u> are <strong>mandatory</strong> components of TCP, Fast recovery is <strong>recommended</strong>, but not required</li>
</ul>
</li>
</ul>
<h6 id="Slow-Start">Slow Start</h6>
<ul>
<li>
<p>When a <strong>TCP connection begins</strong>, the value of <strong>cwnd</strong> is typically initialized to <u>a small value</u> of <strong>1 MSS</strong></p>
</li>
<li>
<p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>t</mi><mi>h</mi><mi>e</mi><mtext>â€…â€Š</mtext><mi>i</mi><mi>n</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>a</mi><mi>l</mi><mtext>â€…â€Š</mtext><mi>s</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi><mtext>â€…â€Š</mtext><mi>r</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>â‰ˆ</mo><mfrac><mrow><mi>M</mi><mi>S</mi><mi>S</mi></mrow><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">the\;initial\;sending\;rate â‰ˆ \frac{MSS}{RTT}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">ini</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ia</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">se</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0463em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">RTT</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">MSS</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
</li>
<li>
<p><code>If MSS=500 bytes and RTT=200 msec,the resulting initial sending rate is only about 20 kbps. Since the available bandwidth to the TCP sender may be much larger than MSS/RTT</code></p>
</li>
<li>
<p>In the slow-start state, the value of cwnd begins at 1 MSS and increases by <strong>1 MSS</strong> every time a transmitted segment is first acknowledged</p>
<img src="/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/2.jpg" srcset="/img/loading.gif" lazyload class="">
</li>
<li>
<p>the TCP send rate <strong>starts slow</strong> but <strong>grows exponentially</strong>(ä»¥æŒ‡æ•°æ–¹å¼) during the slow start phase</p>
</li>
<li>
<p>when should this exponential growth end?</p>
<ul>
<li>If there is a <strong>loss event</strong> (i.e., congestion) indicated by a <strong>timeout</strong>
<ul>
<li>cwnd set to <strong>1 MSS</strong></li>
<li>sets the value of a second state variable,<strong>ssthresh</strong> (shorthand[é€Ÿè®°ï¼Œç®€å†™] for&quot;slow start threshold&quot;ï¼Œ&quot;æ…¢å¯åŠ¨é˜ˆå€¼&quot;çš„é€Ÿè®°)to $$\frac{cwnd}{2}$$</li>
<li>return to slow <strong>start state</strong> (å›åˆ°æ…¢å¯åŠ¨çŠ¶æ€)</li>
</ul>
</li>
<li>when the value of <strong>cwnd equals ssthresh</strong>ï¼Œ(cwnd â‰¥ ssthresh)
<ul>
<li>slow start ends and TCP transitions into <strong>congestion avoidance mode</strong></li>
</ul>
</li>
<li>if three duplicate ACKs are detected
<ul>
<li>in this case TCP performs a <strong>fast retransmit</strong> and enters the <strong>fast recovery state</strong></li>
<li><strong>ssthresh = $$\frac{cwnd}{2}$$</strong></li>
<li><strong>cwnd = ssthresh +3 MSS</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h6 id="Congestion-Avoidanceï¼Œæ‹¥å¡é¿å…">Congestion Avoidanceï¼Œæ‹¥å¡é¿å…</h6>
<ul>
<li>not doubling the value of cwnd every RTT,  TCP adopts a more conservative (ä¿å®ˆçš„) approach and increases  the value of cwnd by just a single MSS every RTT (ä¸€è½®RTTå¢åŠ 1ä¸ª MSS: å‘é€æ–¹æ¯æ”¶åˆ°ä¸€ä¸ªACKï¼Œcwndå¢åŠ 1ä¸ªMSS*(MSS/cwnd))</li>
<li><code>å¦‚æœMSSæ˜¯1460å­—èŠ‚å¹¶ä¸”cwndæ˜¯14600å­—èŠ‚ï¼Œåˆ™åœ¨ä¸€ä¸ªRTTå†…å‘é€10ä¸ªæŠ¥æ–‡æ®µã€‚æ¯ä¸ªåˆ°è¾¾ACKï¼ˆå‡å®šæ¯ä¸ªæŠ¥æ–‡æ®µä¸€ä¸ªACKï¼‰å¢åŠ 1/10MSS çš„æ‹¥å¡çª—å£é•¿åº¦ï¼Œå› æ­¤åœ¨æ”¶åˆ°å¯¹æ‰€æœ‰10ä¸ªæŠ¥æ–‡æ®µçš„ç¡®è®¤åï¼Œæ‹¥å¡çª—å£çš„å€¼å°†å¢åŠ äº†ä¸€ä¸ªMSS</code></li>
<li>When should congestion avoidanceâ€™s linear increase (of 1 MSS per  RTT) end?
<ul>
<li>loss indicated by timeout event
<ul>
<li>ssthresh = cwnd/2</li>
<li>cwnd set to 1 MSS</li>
<li>enters the slow start state (è¿›å…¥æ…¢å¯åŠ¨çŠ¶æ€)</li>
</ul>
</li>
<li>loss indicated by 3 duplicate ACKs
<ul>
<li>ssthresh = cwnd /2</li>
<li>cwnd = ssthresh +3 MSS</li>
<li>performs a fast retransmit and enters the fast recovery state (è¿› å…¥å¿«é€Ÿæ¢å¤çŠ¶æ€)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h6 id="Fast-Recoveryï¼Œå¿«é€Ÿæ¢å¤">Fast Recoveryï¼Œå¿«é€Ÿæ¢å¤</h6>
<ul>
<li>
<p>value of cwnd is increased by 1 MSS (cwnd =  cwnd +MSS) for every duplicate ACK received for the  missing segment that caused TCP to enter the fastrecovery state</p>
<ul>
<li>loss indicated by timeout event
<ul>
<li>ssthresh = cwnd/2</li>
<li>cwnd set to 1 MSS</li>
<li>enters the slow start state</li>
</ul>
</li>
<li>new ACK event
<ul>
<li>cwnd = ssthresh</li>
<li>enters the congestion-avoidance state after deflating cwnd</li>
</ul>
</li>
</ul>
</li>
<li>
<p>(old version) does not have fast recovery  state</p>
</li>
<li>
<p>always sets cwnd to 1 (timeout or 3 duplicate acks)</p>
</li>
<li>
<p>was not used anymore</p>
</li>
<li>
<p>(new version) have fast recovery state  (only 3 duplicate acks)</p>
<ul>
<li>ssthresh = cwnd /2</li>
<li>cwnd = ssthresh +3MSS (å¾ˆå¯èƒ½ç½‘ç»œæœªå‡ºç°ä¸¥é‡æ‹¥å¡ï¼Œå› æ­¤å¯ä¸ ä»1å¼€å§‹ï¼)</li>
</ul>
</li>
<li>
<p>Questionï¼š ä¸ºä»€ä¹ˆcwnd = ssthresh +3.MSS ï¼Ÿ</p>
<ul>
<li>Answerï¼šå‘é€æ–¹æ”¶åˆ°ä¸‰ä¸ªå†—ä½™ACKï¼Œæ„å‘³ç€æœ‰3ä¸ªæ•°æ®åŒ…ç¦»å¼€ç½‘ç»œæŠµè¾¾æ¥æ”¶æ–¹ç¼“å­˜ï¼Œå³ç½‘ç»œä¸­å‡å°‘äº†3ä¸ªæ•°æ®åŒ…ï¼Œå› æ­¤å¯ä»¥å°†æ‹¥å¡çª—å£æ‰©å¤§</li>
</ul>
</li>
<li>
<p>æ³¨ï¼šæœ‰äº›å¿«é€Ÿé‡ä¼ ç‰ˆæœ¬å¹¶æœªåŠ 3ä¸ªMSS</p>
<img src="/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/4.jpg" srcset="/img/loading.gif" lazyload class="">
</li>
</ul>
<h6 id="Summary-FSM-description-of-TCP-Congestion-Control">Summary: FSM description of  TCP Congestion Control</h6>
<ul>
<li>
<p>å…³é”®è¦ç‚¹</p>
<ul>
<li>all the time out event (æ£€æµ‹åˆ°æ‰€æœ‰è¶…æ—¶äº‹ä»¶ï¼Œä¸‹ä¸€è½®æ‰§ è¡Œå¦‚ä¸‹æ“ä½œ)
<ul>
<li>ssthresh = cwnd/2; cwnd = 1 MSS (ç½‘ç»œæ‹¥å¡å¾ˆä¸¥é‡)</li>
<li>enter â€œslow startâ€ state</li>
</ul>
</li>
<li>all the 3 duplicate ACKs event (æ£€æµ‹åˆ°æ‰€æœ‰3æ¬¡å†—ä½™ACK äº‹ä»¶ï¼Œä¸‹ä¸€è½®æ‰§è¡Œå¦‚ä¸‹æ“ä½œ):
<ul>
<li>ssthresh= cwnd/2; cwnd = ssthresh + 3 (ç½‘ç»œæ‹¥å¡ä¸ä¸¥é‡)</li>
<li>enter â€œfast recoverâ€ state</li>
</ul>
</li>
<li>æ³¨æ„ï¼šå¦‚æœå½“å‰cwndä¸ä¸ºå¶æ•°ï¼Œè®¡ç®—æ–°çš„ssthreshæ—¶ä¸€ èˆ¬å‘ä¸‹å–æ•´ï¼ˆæ¯”å¦‚ï¼šcwndå½“å‰å€¼ä¸º15ï¼Œåˆ™æ–°çš„ ssthresh=7ï¼‰ï¼Œæœ‰æ—¶å€™å¯èƒ½ä¼šå‘ä¸Šå–æ•´ï¼ˆæ ¹æ®é¢˜ç›®è¯´æ˜ï¼‰</li>
</ul>
</li>
<li>
<p>when should the  exponential increase  switch to linear?</p>
<ul>
<li>A: when cwnd gets to 1/2  of its value before  timeout,å½“æ‹¥å¡çª—å£æ¥è¿‘è¶…æ—¶äº‹ä»¶å‡ºç°å‰æ‹¥å¡çª—å£çš„ä¸€åŠæ—¶(i.e. ssthresh)</li>
</ul>
</li>
<li>
<p>Implementation</p>
<ul>
<li>variable ssthresh</li>
<li>on loss event, ssthresh is set to 1/2 of cwnd just before loss event</li>
</ul>
</li>
</ul>
<img src="/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/5.jpg" srcset="/img/loading.gif" lazyload class="">
<img src="/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/6.jpg" srcset="/img/loading.gif" lazyload class="">
<ul>
<li>TCP thruput as function of window size, RTT?
<ul>
<li>ignore slow start(very short time), assume always data to send</li>
</ul>
</li>
<li>W: window size (measured in bytes) where loss occurs
<ul>
<li>avg. window size (# in-flight bytes) is <strong>Â¾ W</strong> (window linearly  increases between two extreme values: W and <strong>W/2</strong>)</li>
<li>avg. thruput is <strong>3/4W</strong> per RTT</li>
</ul>
</li>
</ul>
<img src="/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/net1.jpg" srcset="/img/loading.gif" lazyload class="">
<h6 id="TCP-Congestion-Control-Retrospective">TCP Congestion Control: Retrospective</h6>
<ul>
<li>TCP congestion control is often referred to as an <strong>additive-increase</strong>(åŠ æ€§å¢)ï¼Œ**multiplicative-decrease(AIMDï¼Œä¹˜æ€§å‡)**form of congestion control</li>
</ul>
<h6 id="Macroscopic-Description-of-TCP-Throughputï¼Œå¯¹-TCPååé‡çš„å®è§‚æè¿°">Macroscopic Description of TCP Throughputï¼Œå¯¹ TCPååé‡çš„å®è§‚æè¿°</h6>
<ul>
<li>TCP Futures: TCP over  High-Bandwith Paths
<ul>
<li>example: 1500 byte segments, 100ms RTT, want 10  Gbps throughput</li>
<li>requires W = 83,333 in-flight segments</li>
<li>throughput in terms of segment loss probability, L,avg. TCP throughput = (1.22 Â·MSS) /RTT Â·L^1/2^  ==&gt;to achieve 10 Gbps throughput, need a loss rate of  L = 2Î‡10^-10^ â€“ a very small loss rate!</li>
<li>new versions of TCP for high-speed was developed</li>
</ul>
</li>
<li>fairness goal: if K TCP sessions share same bottleneck  link of bandwidth R, each should have average rate of  R/K</li>
<li>two competing sessions:
<ul>
<li>additive increase gives slope of 1, as throughout increases</li>
<li>multiplicative decrease decreases throughput proportionally</li>
</ul>
</li>
</ul>
<img src="/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%827/net2.jpg" srcset="/img/loading.gif" lazyload class="">
<p>==&gt;Eventually fluctuates along the  equal bandwidth share line</p>
<ul>
<li>Fairness and UDP
<ul>
<li>multimedia apps often do  not use TCP
<ul>
<li>do not want rate  throttled by congestion  control</li>
</ul>
</li>
<li>instead use UDP:
<ul>
<li>send audio/video at  constant rate, tolerate  packet loss</li>
</ul>
</li>
</ul>
</li>
<li>Fairness, parallel TCP connections
<ul>
<li>application can open multiple  parallel connections between two  hosts</li>
<li>web browsers do this</li>
<li>e.g., link of rate R with 9 existing  connections:
<ul>
<li>new app asks for 1 TCP, gets  rate R/10</li>
<li>new app asks for 11 TCPs, gets  more than R/2 (not fairness)</li>
</ul>
</li>
</ul>
</li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="category-chain-item">è®¡ç®—æœºç½‘ç»œ</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              

              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/02/20/%E7%AC%AC%E5%9B%9B%E7%AB%A0%E7%BD%91%E7%BB%9C%E5%B1%821/" title="ç¬¬å››ç« -ç½‘ç»œå±‚ï¼ˆä¸€ï¼‰">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">ç¬¬å››ç« -ç½‘ç»œå±‚ï¼ˆä¸€ï¼‰</span>
                        <span class="visible-mobile">Vorheriger</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/02/20/%E7%AC%AC%E4%B8%89%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%826/" title="ç¬¬ä¸‰ç« -è¿è¾“å±‚ï¼ˆå…­ï¼‰">
                        <span class="hidden-mobile">ç¬¬ä¸‰ç« -è¿è¾“å±‚ï¼ˆå…­ï¼‰</span>
                        <span class="visible-mobile">NÃ¤chster</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      

    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Inhaltsverzeichnis</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Suchen</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Stichwort</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a target="_blank" rel="nofollow noopener"><span>ğŸŸ</span></a> <a target="_blank" rel="nofollow noopener"><span>ğŸŸ</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog funktioniert am besten mit aktiviertem JavaScript</div>
  </noscript>
</body>
</html>
